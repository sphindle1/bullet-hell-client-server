<!DOCTYPE html>
<html>
<head>
	<script language="javascript">
		function post(dictionary, url, method) {
			method = method || "post"; // post (set to default) or get

			// Create the form object
			var form = document.createElement("form");
			form.setAttribute("method", method);
			form.setAttribute("action", url);

			// For each key-value pair
			for (key in dictionary) {
				//alert('key: ' + key + ', value:' + dictionary[key]); // debug
				var hiddenField = document.createElement("input");	
				hiddenField.setAttribute("type", "hidden"); 
				hiddenField.setAttribute("name", key);
				hiddenField.setAttribute("value", dictionary[key]);
				// append the newly created control to the form
				form.appendChild(hiddenField); 
			}
			//window.alert(document.getElementById("name").value);
			//form.appendChild(document.getElementById("myForm"));
			document.body.appendChild(form); // inject the form object into the body section
			form.submit();
			//document.getElementById("myForm").submit();
		}
		function username(url, method) {
			myDictionary = [];
			cur = new Date();
			myDictionary[document.getElementById("name").value] = cur.toString();
			post(myDictionary, url, method);
		}
		
	</script>
	
</head>
<body>
	<script language="javascript">
		var myDictionary = [];
		myDictionary["1stKey"] = "1stValue";
		myDictionary["2ndKey"] = "2ndValue";
	</script>
	<form id = "myForm" action="/action_page.php">
	  Name: <input id = "name" type="text" name="fname"><br>
	  <input type="button" value="Click me to POST" 
		onclick="javascript:username('http://localhost:8081');" />
	</form>
	<input type="button" value="Click me to GET" 
		onclick="javascript:post('http://localhost:8081', 'get');" />
</body>
</html>
